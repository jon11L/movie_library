{% load static %}


<div class="col-6 col-sm-4 col-md-3 col-lg-3 col-xl-2 col-xxl-2" style="height: 100%; padding: 0 0.25rem;">
    <div class="media-card h-100 w-100" style="margin: 5% 0% 5% 0;">

        <div class="vote_button_list">
            <small class="vote-average" title="{{ item.vote_count }} votes">{{ item.vote_avg}}/10</small>
            {% if item.type == 'movie' %}

            <div>
                <!-- Watchlist button feature -->
                <button class="watchlist-button"
                    aria-label="Add {{ movie.title }} to watchlist"
                    data-type="{{ item.type }}"
                    data-id="{{ item.id }}"
                    data-bookmarked="{% if item.id in user_watchlist_movies %}true{% else %}false{% endif %}">
                    <i class="{% if item.id in user_watchlist_movies %}fa fa-bookmark {% else %}far fa-bookmark {% endif %}"></i>
                </button>

                <!-- like button feature -->
                <button class="like-button"
                    id="like_button"
                    data-type="{{ item.type }}"
                    data-id="{{ item.id }}"
                    data-liked="{% if item.id in user_liked_movies %}true{% else %}false{% endif %}">
                    <i
                        class="{% if item.id in user_liked_movies %}fa fa-heart liked{% else %}far fa-heart{% endif %}"></i>
                </button>
            </div>

            {% elif item.type == 'serie' %}

            <div>
                <!-- Watchlist button feature -->
                <button class="watchlist-button" 
                    aria-label="Add {{ serie.title }} to watchlist" 
                    data-type="{{ item.type }}"
                    data-id="{{ item.id }}"
                    data-bookmarked="{% if item.id in user_watchlist_series %}true{% else %}false{% endif %}">
                    <i class="{% if item.id in user_watchlist_series %}fa fa-bookmark {% else %}far fa-bookmark {% endif %}"></i>
                </button>
            
                <!-- like button feature  -->
                <button class="like-button" id="like_button" data-type="{{ item.type }}" data-id="{{ item.id }}"
                    data-liked="{% if item.id in user_liked_series %}true{% else %}false{% endif %}">
                    <i class="{% if item.id in user_liked_series %}fa fa-heart liked{% else %}far fa-heart{% endif %}"></i>
                </button>
            </div>
            {% endif %}
        </div>

        <div class="poster-wrapper" title="({{ item.type|title }}) {{ item.genre }}">
            {% if item.poster %}
            <img src="{{ item.poster }}" alt="{{ item.title }} poster" class="img-fluid rounded">
            {% else %}
            <img src="{% static 'images/default_media_photo.jpg' %}" class="img-fluid rounded" alt="Profile photo">
            {% endif %}
        </div>


        <div class="" style="width: fit-content;">
            {% if item.type == 'movie' %}
            <a href="{% url 'movie:detail' slug=item.slug %}" style="text-decoration: none;">
                <h6 class="list-movie-title" style="margin-top: 5px;">{{ item.title|slice:":35" }}</h6>
            </a>
            {% elif item.type == 'serie' %}
            <a href="{% url 'serie:detail' slug=item.slug %}" style="text-decoration: none;">
                <h6 class="list-movie-title" style="margin-top: 5px;">{{ item.title|slice:":35" }}</h6>
            </a>
            {% endif %}
        </div>

    </div>
</div>